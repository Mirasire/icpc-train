#include <cstdio>
#include <algorithm>
#include <cstring>
using namespace std;

//s . . . . 
//. . . . .         N 
//. . . . .     W       E 
//. . . . .         S 
//. . . . . 
//. . . . . 
//. . . . d 


struct castle{
    int x,y;
    int v;
    char dir;
